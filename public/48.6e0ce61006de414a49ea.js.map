{"version":3,"file":"48.6e0ce61006de414a49ea.js","mappings":"i9CAKA,IAAMA,EAAiB,CACrBC,WAAY,CACVC,KAAM,SACNC,MAAO,iBACPC,YAAa,wDACbC,QAAS,SACTC,KAAM,CAAC,SAAU,UACjBC,UAAW,CAAC,6BAA8B,4BAE5CC,QAAS,CACPN,KAAM,SACNC,MAAO,WACPC,YAAa,2DACbC,QAAS,KACTI,QAAS,KACTC,QAAS,OAEXC,UAAW,CACTT,KAAM,SACNC,MAAO,iBACPC,YAAa,oDACbQ,UAAW,GACXC,UAAW,IAEbC,WAAY,CACVZ,KAAM,UACNC,MAAO,kBACPC,YAAa,sEACbC,SAAS,GAEXU,kBAAmB,CACjBb,KAAM,UACNC,MAAO,sBACPC,YAAa,8EACbC,SAAS,IAKPW,EAAmB,CACvBC,WAAY,CACVf,KAAM,SACNC,MAAO,iBACPC,YAAa,+CACbC,QAAS,aAEXa,mBAAoB,CAClBhB,KAAM,UACNC,MAAO,+BACPC,YAAa,uCACbC,QAAS,GACTI,QAAS,GACTC,QAAS,MAEXS,YAAa,CACXjB,KAAM,SACNC,MAAO,4BACPC,YAAa,sDACbC,QAAS,aAEXe,SAAU,CACRlB,KAAM,SACNC,MAAO,yBACPC,YAAa,2CACbC,QAAS,GACTI,QAAS,EACTC,QAAS,OAEXW,iBAAkB,CAChBnB,KAAM,SACNC,MAAO,2BACPC,YAAa,yCACbC,QAAS,EACTI,QAAS,GACTC,QAAS,KAyBPY,EAAW,CACf,WAAY,CACV,aACA,UACA,YACA,aACA,oBACA,aACA,qBACA,cACA,WACA,oBAEFX,UAAW,CACT,YAAa,WACb,UAAW,sCAEbV,WAAY,CACV,YAAa,WAoHjB,QA5GA,SAAiCsB,GAA0B,IA9CxCC,EACXC,EACAC,E,IA4C4BC,EAAaJ,EAAbI,cAAeC,EAAIL,EAAJK,KAEYC,G,GAA7BC,EAAAA,EAAAA,UAASH,GAAiB,CAAC,G,EAAE,E,o4BAAtDI,EAAQF,EAAA,GAAEG,EAAWH,EAAA,GAMtBI,GAtDWT,EAmD4B,WAAxBO,EAAS9B,WAlDxBwB,EAAUS,EAAA,GAAQlC,GAClB0B,EAAW,CAAC,aAAc,UAAW,aAEvCF,IAEFW,OAAOC,OAAOX,EAAYT,GAC1BU,EAASW,KAAK,aAAc,cAAe,aAGtC,CACLnC,KAAM,SACNC,MAAO,yBACPC,YAAa,kEACbsB,SAAAA,EACAD,WAAAA,KA0CFa,EAAAA,EAAAA,WAAU,WACJX,GACFK,EAAYL,EAEhB,EAAG,CAACA,IAGJ,IAAMY,GAAeC,EAAAA,EAAAA,aAAY,SAAAC,GAA+B,IAAlBC,EAAWD,EAArBV,SAClCC,EAAYU,EACd,EAAG,IAGGC,GAAeH,EAAAA,EAAAA,aAAY,SAAAI,GAAiC,IAE1DC,EAAWX,EAAA,GAFwCU,EAAvBb,UAGH,WAA3Bc,EAAY5C,oBACP4C,EAAY5B,kBACZ4B,EAAY3B,0BACZ2B,EAAY1B,mBACZ0B,EAAYzB,gBACZyB,EAAYxB,kBAIjBO,GACFA,EAAKiB,EAET,EAAG,CAACjB,IAGEkB,GAAcN,EAAAA,EAAAA,aAAY,SAACO,GAC/BC,QAAQC,MAAM,0BAA2BF,EAC3C,EAAG,IAEH,OACEG,EAAAA,cAAA,OAAKC,UAAU,iCACbD,EAAAA,cAACE,EAAAA,GAAI,CACHnB,OAAQA,EACRX,SAAUA,EACVS,SAAUA,EACVsB,UAAWA,EAAAA,GACXC,SAAUf,EACVgB,SAAUZ,EACVa,QAASV,EACTW,cAAc,IAEhBP,EAAAA,cAAA,u5CAiDN,C","sources":["webpack://signalk-data-connector/./src/components/PluginConfigurationPanel.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\nimport Form from \"@rjsf/core\";\nimport validator from \"@rjsf/validator-ajv8\";\n\n// Base schema properties shared between server and client modes\nconst baseProperties = {\n  serverType: {\n    type: \"string\",\n    title: \"Operation Mode\",\n    description: \"Select Server to receive data, or Client to send data\",\n    default: \"client\",\n    enum: [\"server\", \"client\"],\n    enumNames: [\"Server Mode - Receive Data\", \"Client Mode - Send Data\"]\n  },\n  udpPort: {\n    type: \"number\",\n    title: \"UDP Port\",\n    description: \"UDP port for data transmission (must match on both ends)\",\n    default: 4446,\n    minimum: 1024,\n    maximum: 65535\n  },\n  secretKey: {\n    type: \"string\",\n    title: \"Encryption Key\",\n    description: \"32-character secret key (must match on both ends)\",\n    minLength: 32,\n    maxLength: 32\n  },\n  useMsgpack: {\n    type: \"boolean\",\n    title: \"Use MessagePack\",\n    description: \"Binary serialization for smaller payloads (must match on both ends)\",\n    default: false\n  },\n  usePathDictionary: {\n    type: \"boolean\",\n    title: \"Use Path Dictionary\",\n    description: \"Encode paths as numeric IDs for bandwidth savings (must match on both ends)\",\n    default: false\n  }\n};\n\n// Client-only properties\nconst clientProperties = {\n  udpAddress: {\n    type: \"string\",\n    title: \"Server Address\",\n    description: \"IP address or hostname of the SignalK server\",\n    default: \"127.0.0.1\"\n  },\n  helloMessageSender: {\n    type: \"integer\",\n    title: \"Heartbeat Interval (seconds)\",\n    description: \"How often to send heartbeat messages\",\n    default: 60,\n    minimum: 10,\n    maximum: 3600\n  },\n  testAddress: {\n    type: \"string\",\n    title: \"Connectivity Test Address\",\n    description: \"Address to ping for network testing (e.g., 8.8.8.8)\",\n    default: \"127.0.0.1\"\n  },\n  testPort: {\n    type: \"number\",\n    title: \"Connectivity Test Port\",\n    description: \"Port for connectivity test (80, 443, 53)\",\n    default: 80,\n    minimum: 1,\n    maximum: 65535\n  },\n  pingIntervalTime: {\n    type: \"number\",\n    title: \"Check Interval (minutes)\",\n    description: \"How often to test network connectivity\",\n    default: 1,\n    minimum: 0.1,\n    maximum: 60\n  }\n};\n\n// Generate schema based on current mode\nfunction getSchema(isClientMode) {\n  const properties = { ...baseProperties };\n  const required = [\"serverType\", \"udpPort\", \"secretKey\"];\n\n  if (isClientMode) {\n    // Add client-only properties\n    Object.assign(properties, clientProperties);\n    required.push(\"udpAddress\", \"testAddress\", \"testPort\");\n  }\n\n  return {\n    type: \"object\",\n    title: \"SignalK Data Connector\",\n    description: \"Configure encrypted UDP data transmission between SignalK units\",\n    required,\n    properties\n  };\n}\n\n// UI Schema for field ordering and styling\nconst uiSchema = {\n  \"ui:order\": [\n    \"serverType\",\n    \"udpPort\",\n    \"secretKey\",\n    \"useMsgpack\",\n    \"usePathDictionary\",\n    \"udpAddress\",\n    \"helloMessageSender\",\n    \"testAddress\",\n    \"testPort\",\n    \"pingIntervalTime\"\n  ],\n  secretKey: {\n    \"ui:widget\": \"password\",\n    \"ui:help\": \"Must be exactly 32 characters long\"\n  },\n  serverType: {\n    \"ui:widget\": \"select\"\n  }\n};\n\n/**\n * Custom configuration panel for SignalK Data Connector plugin\n * Uses RJSF to render a dynamic form that adapts based on serverType selection\n */\nfunction PluginConfigurationPanel({ configuration, save }) {\n  // Track form data state\n  const [formData, setFormData] = useState(configuration || {});\n\n  // Determine if we're in client mode\n  const isClientMode = formData.serverType !== \"server\";\n\n  // Generate schema based on current mode\n  const schema = getSchema(isClientMode);\n\n  // Update form data when configuration prop changes\n  useEffect(() => {\n    if (configuration) {\n      setFormData(configuration);\n    }\n  }, [configuration]);\n\n  // Handle form changes\n  const handleChange = useCallback(({ formData: newFormData }) => {\n    setFormData(newFormData);\n  }, []);\n\n  // Handle form submission\n  const handleSubmit = useCallback(({ formData: submittedData }) => {\n    // Clean up client-only fields when in server mode\n    const cleanedData = { ...submittedData };\n    if (cleanedData.serverType === \"server\") {\n      delete cleanedData.udpAddress;\n      delete cleanedData.helloMessageSender;\n      delete cleanedData.testAddress;\n      delete cleanedData.testPort;\n      delete cleanedData.pingIntervalTime;\n    }\n\n    // Call the save function provided by SignalK\n    if (save) {\n      save(cleanedData);\n    }\n  }, [save]);\n\n  // Handle errors\n  const handleError = useCallback((errors) => {\n    console.error(\"Form validation errors:\", errors);\n  }, []);\n\n  return (\n    <div className=\"signalk-data-connector-config\">\n      <Form\n        schema={schema}\n        uiSchema={uiSchema}\n        formData={formData}\n        validator={validator}\n        onChange={handleChange}\n        onSubmit={handleSubmit}\n        onError={handleError}\n        liveValidate={false}\n      />\n      <style>{`\n        .signalk-data-connector-config {\n          max-width: 600px;\n          margin: 0 auto;\n        }\n        .signalk-data-connector-config .form-group {\n          margin-bottom: 1rem;\n        }\n        .signalk-data-connector-config label {\n          font-weight: 600;\n          margin-bottom: 0.25rem;\n          display: block;\n        }\n        .signalk-data-connector-config .help-block {\n          font-size: 0.85rem;\n          color: #666;\n          margin-top: 0.25rem;\n        }\n        .signalk-data-connector-config input,\n        .signalk-data-connector-config select {\n          width: 100%;\n          padding: 0.5rem;\n          border: 1px solid #ccc;\n          border-radius: 4px;\n          font-size: 1rem;\n        }\n        .signalk-data-connector-config input[type=\"checkbox\"] {\n          width: auto;\n        }\n        .signalk-data-connector-config .btn-info {\n          background-color: #17a2b8;\n          border-color: #17a2b8;\n          color: white;\n          padding: 0.5rem 1rem;\n          border-radius: 4px;\n          cursor: pointer;\n          font-size: 1rem;\n        }\n        .signalk-data-connector-config .btn-info:hover {\n          background-color: #138496;\n          border-color: #117a8b;\n        }\n        .signalk-data-connector-config .text-danger {\n          color: #dc3545;\n          font-size: 0.85rem;\n        }\n      `}</style>\n    </div>\n  );\n}\n\nexport default PluginConfigurationPanel;\n"],"names":["baseProperties","serverType","type","title","description","default","enum","enumNames","udpPort","minimum","maximum","secretKey","minLength","maxLength","useMsgpack","usePathDictionary","clientProperties","udpAddress","helloMessageSender","testAddress","testPort","pingIntervalTime","uiSchema","_ref","isClientMode","properties","required","configuration","save","_useState2","useState","formData","setFormData","schema","_objectSpread","Object","assign","push","useEffect","handleChange","useCallback","_ref2","newFormData","handleSubmit","_ref3","cleanedData","handleError","errors","console","error","React","className","Form","validator","onChange","onSubmit","onError","liveValidate"],"sourceRoot":""}